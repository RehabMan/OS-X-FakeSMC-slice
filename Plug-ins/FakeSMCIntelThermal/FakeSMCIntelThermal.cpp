/* *  FakeSMCIntelThermal.cpp *  FakeSMCIntelThermal * *  Created by mozo on 18/05/10. *  Copyright © 2010 mozodojo. All rights reserved. * *	This code includes parts of original Open Hardware Monitor code *	Copyright © 2010 Michael Möller. All Rights Reserved. */#include "FakeSMCIntelThermal.h"#define super IOServiceOSDefineMetaClassAndStructors(FakeSMCIntelThermal, IOService)bool FakeSMCIntelThermal::init(OSDictionary *properties){    bool res = super::init(properties);	OSNumber *  numObj;	TJMax = 0;	numObj  = OSDynamicCast( OSNumber, getProperty("TJMax") );	if ( numObj )    {		TJMax = numObj->unsigned32BitValue();		}	return res;}IOService* FakeSMCIntelThermal::probe(IOService *provider, SInt32 *score){	if (super::probe(provider, score) != this) return 0;		plugin = new IntelThermalPlugin();	if(plugin)	{		plugin->m_TjMax = TJMax;	}		if(plugin && plugin->Probe())	{		return this;	}		return 0;}bool FakeSMCIntelThermal::start(IOService * provider){	if (!super::start(provider)) return false;		plugin->Start();		registerService(0);		return true;	}void FakeSMCIntelThermal::stop (IOService* provider){	plugin->Stop();		super::stop(provider);}void FakeSMCIntelThermal::free (){	delete plugin;		super::free ();}